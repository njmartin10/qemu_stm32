desc "Run the QEMU STM32 binary with docker"
task :run do
    system("docker run --rm qemu_stm32 /usr/local/bin/qemu-system-arm -M stm32-p103 -serial mon:stdio -kernel /stm32_p103_demos/demos/freertos_singlethread/main.bin")
end

desc "Run the button demo in QEMU STM32 binary with docker"
task :btn do
    system("docker run -it --rm qemu_stm32 /usr/local/bin/qemu-system-arm -M stm32-p103 -serial mon:stdio -kernel /stm32_p103_demos/demos/button/main.bin")
end

desc "Run the echo demo in QEMU STM32 binary with docker"
task :echo do
    system("docker run -it --rm qemu_stm32 /usr/local/bin/qemu-system-arm -M stm32-p103 -serial mon:stdio -kernel /stm32_p103_demos/demos/uart_echo/main.bin")
end

desc "Debug running docker container get correct container ID"
task :dbg do
    system("docker exec -it 26867903343b bash")
end

desc "Run interactive shell"
task :int do
    system("docker run -it qemu_stm32 bash")
end
